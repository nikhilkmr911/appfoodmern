{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Nikhil/Desktop/foodel/myyapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"C:/Users/Nikhil/Desktop/foodel/myyapp/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"C:/Users/Nikhil/Desktop/foodel/myyapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Nikhil/Desktop/foodel/myyapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import{useDispatchCart,useCart}from'./ContextReducer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Card(props){var dispatch=useDispatchCart();var data=useCart();var priceRef=useRef();var options=props.options;var priceOptions=Object.keys(options);var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),size=_useState4[0],setSize=_useState4[1];var handleAddToCart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var food,_iterator,_step,item;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:food=[];_iterator=_createForOfIteratorHelper(data);_context.prev=2;_iterator.s();case 4:if((_step=_iterator.n()).done){_context.next=11;break;}item=_step.value;if(!(item.id===props.foodItem._id&&item.size===size)){_context.next=9;break;}food=item;return _context.abrupt(\"break\",11);case 9:_context.next=4;break;case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);_iterator.e(_context.t0);case 16:_context.prev=16;_iterator.f();return _context.finish(16);case 19:if(!(food!==[])){_context.next=31;break;}if(!(food.size===size)){_context.next=26;break;}_context.next=23;return dispatch({type:\"UPDATE\",id:props.foodItem._id,price:finalPrice,qty:qty});case 23:return _context.abrupt(\"return\");case 26:if(!(food.size!==size)){_context.next=30;break;}_context.next=29;return dispatch({type:\"ADD\",id:props.foodItem._id,name:props.foodItem.name,price:finalPrice,qty:qty,size:size,img:props.foodItem.img});case 29:return _context.abrupt(\"return\");case 30:return _context.abrupt(\"return\");case 31:_context.next=33;return dispatch({type:\"ADD\",id:props.foodItem._id,name:props.foodItem.name,price:finalPrice,qty:qty,size:size});case 33:case\"end\":return _context.stop();}},_callee,null,[[2,13,16,19]]);}));return function handleAddToCart(){return _ref.apply(this,arguments);};}();useEffect(function(){setSize(priceRef.current.value);},[]);var finalPrice=qty*parseInt(options[size]);useEffect(function(){setSize(priceRef.current.value);},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{class:\"card\",className:\"card shadow-lg p-3 rounded bg-light text-white mb-3\",style:{\"width\":\"18rem\",\"maxHeight\":\"360px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:props.foodItem.img,className:\"card-img-top\",alt:\"...\",style:{height:\"120px\",objectFit:\"fill\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title font-weight-bold text-dark bg-light\",children:props.foodItem.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"container w-100\",children:[/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100 bg-secondary rounded text-white\",onChange:function onChange(e){return setQty(e.target.value);},children:Array.from(Array(6),function(e,i){return/*#__PURE__*/_jsx(\"option\",{value:i+1,children:i+1},i+1);})}),/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100 bg-secondary rounded text-white\",ref:priceRef,onChange:function onChange(e){return setSize(e.target.value);},children:priceOptions.map(function(data){return/*#__PURE__*/_jsx(\"option\",{value:data,children:data},data);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-inline badge shadow-lg p-3 rounded text-dark h-100 fs-5\",children:[\"\\u20B9\",finalPrice,\"/-\"]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{className:'btn btn-warning  justify-center ms-2',onClick:handleAddToCart,children:\"Add to Cart\"})]})]})})});}","map":{"version":3,"names":["React","useEffect","useRef","useState","useDispatchCart","useCart","Card","props","dispatch","data","priceRef","options","priceOptions","Object","keys","qty","setQty","size","setSize","handleAddToCart","food","item","id","foodItem","_id","type","price","finalPrice","name","img","current","value","parseInt","height","objectFit","e","target","Array","from","i","map"],"sources":["C:/Users/Nikhil/Desktop/foodel/myyapp/src/Components/Card.js"],"sourcesContent":["import React, {useEffect, useRef, useState} from 'react'\r\nimport { useDispatchCart, useCart } from './ContextReducer';\r\n\r\nexport default function Card(props) {\r\n    let dispatch = useDispatchCart();\r\n    let data = useCart();\r\n    const priceRef = useRef();\r\n    let options = props.options;\r\n    let priceOptions = Object.keys(options);\r\n    const [qty, setQty] = useState(1);\r\n    const [size, setSize] = useState(\"\");\r\n\r\n    const handleAddToCart=async()=>{\r\n        let food=[]\r\n        for(const item of data){\r\n            if(item.id === props.foodItem._id && item.size===size){\r\n                food = item;\r\n\r\n                break;\r\n            }\r\n        }\r\n        if(food !== []){\r\n            if(food.size === size){\r\n             await dispatch({type:\"UPDATE\", id: props.foodItem._id, price:finalPrice, qty:qty})\r\n             return\r\n        }\r\n        else if(food.size !== size){\r\n        await dispatch({type:\"ADD\", id:props.foodItem._id, name:props.foodItem.name, price:finalPrice, qty: qty, size:size, img:props.foodItem.img})\r\n        return\r\n        }\r\n        return\r\n    }\r\n      await dispatch({type:\"ADD\", id:props.foodItem._id, name:props.foodItem.name, price:finalPrice, qty:qty, size:size})\r\n}\r\n\r\n    useEffect(() => {\r\n    setSize(priceRef.current.value)\r\n    }, [])\r\n\r\n    let finalPrice = qty * parseInt(options[size]);\r\n     useEffect(()=>{\r\n       setSize(priceRef.current.value)\r\n    }, [])\r\n    return (\r\n        <div >\r\n            <div>\r\n                <div class=\"card\" className=\"card shadow-lg p-3 rounded bg-light text-white mb-3\" style={{ \"width\": \"18rem\", \"maxHeight\": \"360px\" }}>\r\n                    <img src={props.foodItem.img} className=\"card-img-top\" alt=\"...\" style={{height:\"120px\",objectFit:\"fill\"}} />\r\n                    <div className=\"card-body\">\r\n                        <h5 className=\"card-title font-weight-bold text-dark bg-light\">{props.foodItem.name}</h5>\r\n                        <div className=\"container w-100\">\r\n                            <select className='m-2 h-100 bg-secondary rounded text-white' onChange={(e)=>setQty(e.target.value)}>\r\n                                {Array.from(Array(6), (e, i) => {\r\n                                    return (\r\n                                        <option key={i + 1} value={i + 1}>{i + 1}</option>\r\n                                    )\r\n                                })}\r\n                            </select>\r\n                            <select className='m-2 h-100 bg-secondary rounded text-white' ref={priceRef} onChange={(e)=>setSize(e.target.value)}>\r\n                             {priceOptions.map((data)=>{\r\n                                return <option key={data} value={data}>{data}</option>\r\n                               })}\r\n                            </select>\r\n                            <div className='d-inline badge shadow-lg p-3 rounded text-dark h-100 fs-5'>â‚¹{finalPrice}/-</div>\r\n                        </div>\r\n                        <hr>\r\n                        </hr>\r\n                        <button className={'btn btn-warning  justify-center ms-2'} onClick={handleAddToCart}>Add to Cart</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )                      \r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}